# Leveling System

The leveling system provides experience-based progression for players.

## Overview

- Gain experience (XP) primarily from slaying enemies
- Level up to increase your power
- Rested XP accumulates while logged out in coffins
- Gear Level UI is repurposed to show Exp level

---

## How It Works

### Gaining Experience

Experience is earned from:
- **Killing enemies** — Base XP scaled by unit level
- **VBlood bosses** — Bonus multiplier for boss kills
- **Group kills** — XP shared among nearby players

### Level Scaling

The `LevelScalingMultiplier` reduces XP from enemies much higher or lower than your level:
- Killing enemies at your level = full XP
- Large level gaps = reduced XP

---

## Rested XP

When enabled, players accumulate bonus XP while logged out:

- **Stone coffins** — Full rested XP rate
- **Wooden coffins** — Half rested XP rate
- **Maximum rested** — Capped at configured levels worth

<Callout type="tip">
  Log out in a stone coffin for maximum rested XP gains!
</Callout>

---

## Gear Level Mirage

BloodCraftPlus repurposes the vanilla **Equipment tab** “Gear Level” display:

```
Gear Level (Equipment Tab) = Exp Level
```

- The big “Gear Level” number now reflects your **Exp level** (the leveling system).
- Weapon expertise and class are shown separately in the EclipsePlus UI (e.g. the summary text under Gear Level and the Expertise bar/tab).

---

## Chat Commands

| Command | Shortcut | Description |
|---------|----------|-------------|
| `.level get` | `.lvl get` | View current level and XP |
| `.level log` | `.lvl log` | Toggle XP gain logging |
| `.level set [Player] [Level]` | `.lvl set` | (Admin) Set player level |

---

## Configuration

### Core Settings

| Option | Default | Description |
|--------|---------|-------------|
| `LevelingSystem` | `false` | Enable/disable leveling |
| `MaxLevel` | `90` | Maximum player level |
| `StartingLevel` | `10` | Starting level for new players |

### XP Multipliers

| Option | Default | Description |
|--------|---------|-------------|
| `UnitLevelingMultiplier` | `7.5` | XP multiplier for regular units |
| `VBloodLevelingMultiplier` | `15` | XP multiplier for VBloods |
| `DocileUnitMultiplier` | `0.15` | XP multiplier for docile units |
| `WarEventMultiplier` | `0.2` | XP for war event spawns |
| `UnitSpawnerMultiplier` | `0` | XP for spawner units (nests, tombs) |
| `GroupLevelingMultiplier` | `1` | XP multiplier for group kills |
| `LevelScalingMultiplier` | `0.05` | Reduction for level gap |

### Rested XP

| Option | Default | Description |
|--------|---------|-------------|
| `RestedXPSystem` | `false` | Enable rested XP |
| `RestedXPRate` | `0.05` | Rested XP per tick (% of max) |
| `RestedXPMax` | `5` | Max levels of rested XP |
| `RestedXPTickRate` | `120` | Minutes per tick |

### Experience Sharing

| Option | Default | Description |
|--------|---------|-------------|
| `ExpShare` | `true` | Share XP with nearby players |
| `ExpShareLevelRange` | `10` | Max level difference for sharing |
| `ExpShareDistance` | `25` | Range in units (~5 floor tiles) |

---

## Server Implementation

Key files:
- `Systems/Leveling/LevelingSystem.cs` — Core leveling logic
- `Systems/Leveling/LevelingManager.cs` — XP calculations
- `Commands/LevelingCommands.cs` — Chat commands
