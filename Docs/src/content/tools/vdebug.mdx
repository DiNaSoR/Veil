# VDebug

VDebug is an optional debug plugin for modders and developers working with V Rising mods.

## Overview

VDebug provides debugging tools without cluttering the main EclipsePlus plugin:
- Asset dumping
- UI inspection
- Layout editing
- Centralized logging

<Callout type="info">
  VDebug is **optional** ‚Äî EclipsePlus works perfectly without it, just without debug features.
</Callout>

---

## Installation

```
üìÅ V Rising/BepInEx/plugins/
   ‚îî‚îÄ‚îÄ VDebug.dll
```

Download from [GitHub Releases](https://github.com/DiNaSoR/BloodCraftPlus/releases) and place in your plugins folder.

---

## Features

### Asset Dumping

Export game assets for analysis:
- Sprites and textures
- UI hierarchies
- Component data

### UI Inspector

Inspect Unity UI elements in real-time:
- Hierarchy navigation
- Component properties
- Anchor and layout info
- Parent chain analysis
- Sibling relationships

**New:** You can enable **Hover Inspect** from inside the inspector panel to inspect elements just by hovering (no click required). This is useful for quickly finding the right object path without disrupting gameplay.

**Tip:** If the inspector can‚Äôt pick an element, it‚Äôs often because that UI uses `raycastTarget = false` (common for non-interactive HUD text/icons). VDebug includes a fallback picker so you can still inspect EclipsePlus + base game UI even when it‚Äôs not clickable.

### Layout Editor

Adjust UI positions in real-time:
- Drag elements to reposition
- Save layout preferences
- Reset to defaults

### Debug Logging

Centralized log routing:
- All EclipsePlus logs route through VDebug
- Without VDebug installed, logs are silent
- Clean release builds without debug noise

---

## Usage

### Accessing Debug Tools

When VDebug is installed:
- Press designated keys to toggle debug panels
- Access inspector through the debug menu
- Export data to files

### Log Output

Logs are written to:
```
BepInEx/LogOutput.log
```

And to the VDebug panel when visible.

---

## Integration

### For Plugin Developers

VDebug is designed for reflection-based integration:

```csharp
// EclipsePlus calls VDebug via reflection
// If VDebug isn't installed, calls are no-ops

public static class DebugToolsBridge
{
    private static bool _initialized;
    private static Action<string> _logAction;
    
    public static void Log(string message)
    {
        if (!_initialized) Initialize();
        _logAction?.Invoke(message);
    }
    
    private static void Initialize()
    {
        // Find VDebug via reflection
        // Set up log action delegate
        _initialized = true;
    }
}
```

### API Surface

VDebug exposes:
- `VDebugApi.Log(string)` ‚Äî Log a message
- `VDebugApi.LogWarning(string)` ‚Äî Log a warning
- `VDebugApi.LogError(string)` ‚Äî Log an error
- `VDebugApi.DumpAsset(object)` ‚Äî Export asset data

---

## File Structure

```
Tools/VDebug/
‚îú‚îÄ‚îÄ VDebug.csproj          # Project file
‚îú‚îÄ‚îÄ Plugin.cs              # BepInEx plugin entry
‚îú‚îÄ‚îÄ VDebugApi.cs           # Public API
‚îú‚îÄ‚îÄ VDebugLog.cs           # Logging implementation
‚îî‚îÄ‚îÄ Services/
    ‚îú‚îÄ‚îÄ AssetDumpService.cs     # Asset exporting
    ‚îú‚îÄ‚îÄ DebugPanelService.cs    # Debug UI
    ‚îú‚îÄ‚îÄ FontService.cs          # Font loading
    ‚îî‚îÄ‚îÄ UIInspectorService.cs   # UI inspection
```

---

## Building

```bash
cd Tools/VDebug
dotnet build -c Release
```

Output: `Tools/VDebug/bin/Release/net6.0/VDebug.dll`

---

## Notes

### IL2CPP Compatibility

VDebug follows IL2CPP best practices:
- No custom MonoBehaviours via `AddComponent<T>()`
- Reflection-safe API discovery
- Graceful degradation when not installed

### Performance

VDebug is designed to be lightweight:
- Only active when explicitly triggered
- Minimal overhead when idle
- No impact on release builds
